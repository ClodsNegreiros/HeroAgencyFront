<div class="hero-form-container">
  <h2>{{ isEditing ? "Editar" : "Novo" }} Super-Herói</h2>

  <form [formGroup]="heroForm">
    <div class="form-group">
      <label for="nome">Nome</label>
      <input id="nome" type="text" formControlName="nome" />
      <div
        class="error"
        *ngIf="
          heroForm.get('nome')?.errors?.required &&
          heroForm.get('nome')?.touched
        "
      >
        Nome é obrigatório
      </div>
    </div>

    <div class="form-group">
      <label for="nomeHeroi">Nome do Herói</label>
      <input id="nomeHeroi" type="text" formControlName="nomeHeroi" />
      <div
        class="error"
        *ngIf="
          heroForm.get('nomeHeroi')?.errors?.required &&
          heroForm.get('nomeHeroi')?.touched
        "
      >
        Nome do Herói é obrigatório
      </div>
    </div>

    <div class="form-group">
      <label for="dataNascimento">Data de Nascimento</label>
      <input id="dataNascimento" type="date" formControlName="dataNascimento" />
      <div
        class="error"
        *ngIf="
          heroForm.get('dataNascimento')?.errors?.required &&
          heroForm.get('dataNascimento')?.touched
        "
      >
        Data de Nascimento é obrigatória
      </div>
    </div>

    <div class="form-group">
      <label for="altura">Altura (m)</label>
      <input id="altura" type="number" step="0.01" formControlName="altura" />
      <div
        class="error"
        *ngIf="
          heroForm.get('altura')?.errors?.required &&
          heroForm.get('altura')?.touched
        "
      >
        Altura é obrigatória
      </div>
    </div>

    <div class="form-group">
      <label for="peso">Peso (kg)</label>
      <input id="peso" type="number" step="0.1" formControlName="peso" />
      <div
        class="error"
        *ngIf="
          heroForm.get('peso')?.errors?.required &&
          heroForm.get('peso')?.touched
        "
      >
        Peso é obrigatório
      </div>
    </div>

    <div class="form-group">
      <label>Superpoderes</label>
      <div class="superpowers-grid">
        <div *ngFor="let power of superpowers" class="superpower-item">
          <input
            type="checkbox"
            [id]="'power-' + power.id"
            [value]="power.id"
            [checked]="heroForm.get('superpoderes')?.value?.includes(power.id)"
          />
          <label [for]="'power-' + power.id">{{ power.superpoder }}</label>
        </div>
      </div>
      <div
        class="error"
        *ngIf="
          heroForm.get('superpoderes')?.errors?.required &&
          heroForm.get('superpoderes')?.touched
        "
      >
        Selecione pelo menos um superpoder
      </div>
    </div>

    <div class="form-actions">
      <button type="button" routerLink="/heroes" class="btn-cancel">
        Cancelar
      </button>
      <button type="submit" [disabled]="!heroForm.valid" class="btn-save">
        {{ isEditing ? "Atualizar" : "Criar" }} Herói
      </button>
    </div>
  </form>
</div>
